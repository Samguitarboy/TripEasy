import{_ as k,F as y,H as h,c as l,a as w,b as e,u as V,x as P,t as u,k as c,l as b,y as v,d as t,z as E,g as d,v as f,h as g,n as m,A as U,B as C,C as T,o as n,q as B}from"./index-BFa3nxHJ.js";const I={class:"wrap"},$={class:"content"},D={class:"container"},N={class:"row"},q={class:"sidebar col-md-3 col-lg-2"},M={class:"sidebar-content"},S=["src"],F={class:"name"},O=["onClick"],z={class:"col-md-9 col-lg-10"},H={class:"form-group"},j=["disabled"],A={class:"form-group"},L=["for"],W=["id","onUpdate:modelValue"],G=["value","disabled"],J={class:"btn_saveBtn"},K={key:1,id:"password"},Q={class:"password-container"},R={class:"password-inputs"},X={class:"form-group"},Y={class:"form-group"},Z={class:"password-input-group"},_=["type","disabled"],x={class:"form-group"},ee={class:"password-input-group"},se=["type","disabled"],ie={class:"btn_saveBtn"},oe={name:"userprofilePage",components:{HeaderComponent:h,FooterComponent:y},data(){return{isEditable:{name:!1,new:!1,confirm:!1},currentTab:"會員資訊",tabs:["會員資訊","會員等級","個人偏好設定","個人訂單查看"],icons:{會員資訊:"bi bi-person-vcard",會員等級:"bi bi-trophy",個人偏好設定:"bi bi-gear",個人訂單查看:"bi bi-cart-check",密碼管理:"bi bi-shield-lock"},user:{name:"",email:"",preference1:"",preference2:"",preference3:""},preferences:[{label:"個人偏好",model:"preference1"},{label:"次要偏好",model:"preference2"},{label:"第三偏好",model:"preference3"}],options:["探索冒險","放鬆療癒","文化體驗","美食探索","都市感官","自然療癒","親子家庭","拍照打卡","懶人輕鬆","特殊主題"],password:{current:"",new:{value:"",confirm:""}},passwordVisible:{new:!1,confirm:!1}}},mounted(){this.fetchUserInfo()},methods:{togglePassword(r){this.passwordVisible[r]=!this.passwordVisible[r]},toggleEdit(r){this.isEditable[r]=!this.isEditable[r]},isOptionDisabled(r,i){return[{key:"preference1",val:this.user.preference1},{key:"preference2",val:this.user.preference2},{key:"preference3",val:this.user.preference3}].some(o=>o.key!==i&&o.val===r)},async fetchUserInfo(){const r=await T();this.user={name:r.data.user.name,email:r.data.user.email,preference1:r.data.user.preferences[0],preference2:r.data.user.preferences[1],preference3:r.data.user.preferences[2]}},async updateUserInfo(){const r={name:this.user.name,preference:[this.user.preference1,this.user.preference2,this.user.preference3]};await C(r),this.isEditable.name=!1},async updateUserPassword(){console.log(this.password.current),await U(this.password.current,this.password.new.value,this.password.new.confirm,()=>{this.password.current="",this.password.new.value="",this.password.new.confirm="",this.isEditable.password=!1}),this.isEditable.new=!1,this.isEditable.confirm=!1}}},re=Object.assign(oe,{setup(r){return(i,s)=>(n(),l("div",I,[w(h),e("div",$,[e("div",D,[e("div",N,[e("div",q,[e("div",M,[e("img",{class:"headimg",src:V(P).userPicture,alt:"頭像"},null,8,S),e("div",F,u(i.user.name),1),(n(!0),l(c,null,b(i.tabs,o=>(n(),l("div",{class:m(["sidebaritem",{active:i.currentTab===o}]),key:o,onClick:p=>i.currentTab=o},[e("i",{class:m(i.icons[o]+" me-2")},null,2),t(u(o),1)],10,O))),128))])]),e("div",z,[s[22]||(s[22]=e("div",{class:"title"},[e("i",{class:"bi bi-person-circle me-2"}),t("會員中心")],-1)),i.currentTab==="會員資訊"?(n(),l("form",{key:0,id:"userinfo",onSubmit:s[4]||(s[4]=E(()=>{},["prevent"]))},[s[17]||(s[17]=e("div",{class:"form-title"},[e("i",{class:"bi bi-person-vcard me-2"}),t("會員資訊")],-1)),e("div",H,[s[14]||(s[14]=e("label",{for:"name",class:"form-label"},"姓名",-1)),d(e("input",{type:"text",class:"form-control",id:"name","onUpdate:modelValue":s[0]||(s[0]=o=>i.user.name=o),disabled:!i.isEditable.name},null,8,j),[[f,i.user.name]]),e("span",{class:"edit-icon",onClick:s[1]||(s[1]=o=>i.toggleEdit("name"))},s[13]||(s[13]=[e("i",{class:"bi bi-pencil-square"},null,-1)]))]),e("div",A,[s[15]||(s[15]=e("label",{for:"email",class:"form-label"},"信箱",-1)),d(e("input",{type:"email",class:"form-control",id:"email","onUpdate:modelValue":s[2]||(s[2]=o=>i.user.email=o),disabled:"false"},null,512),[[f,i.user.email]])]),(n(!0),l(c,null,b(i.preferences,(o,p)=>(n(),l("div",{class:"form-group",key:p},[e("label",{for:"preference"+(p+1),class:"form-label"},u(o.label),9,L),d(e("select",{class:"form-select",id:"preference"+(p+1),"onUpdate:modelValue":a=>i.user[o.model]=a},[(n(!0),l(c,null,b(i.options,a=>(n(),l("option",{key:a,value:a,disabled:i.isOptionDisabled(a,o.model)},u(a),9,G))),128))],8,W),[[B,i.user[o.model]]])]))),128)),e("div",J,[e("button",{type:"button",class:"btn btn-primary save-button",onClick:s[3]||(s[3]=(...o)=>i.updateUserInfo&&i.updateUserInfo(...o))},s[16]||(s[16]=[e("i",{class:"bi bi-check-circle me-2"},null,-1),t("儲存設定 ")]))])],32)):v("",!0),i.currentTab==="會員資訊"?(n(),l("form",K,[s[21]||(s[21]=e("div",{class:"form-title"},[e("i",{class:"bi bi-shield-lock me-2"}),t("密碼管理")],-1)),e("div",Q,[e("div",R,[e("div",X,[d(e("input",{type:"password","onUpdate:modelValue":s[5]||(s[5]=o=>i.password.current=o),class:"form-control password-input",id:"currentPassword",placeholder:"請輸入舊密碼"},null,512),[[f,i.password.current]])]),e("div",Y,[e("div",Z,[d(e("input",{type:i.passwordVisible.new?"text":"password",disabled:!i.isEditable.new,"onUpdate:modelValue":s[6]||(s[6]=o=>i.password.new.value=o),class:"form-control password-input",id:"newPassword",placeholder:"請輸入新密碼"},null,8,_),[[g,i.password.new.value]]),e("span",{class:"password-toggle",onClick:s[7]||(s[7]=o=>i.togglePassword("new"))},[e("i",{class:m(i.passwordVisible.new?"bi bi-eye-slash":"bi bi-eye")},null,2)]),e("span",{class:"edit-icon pw-edit-icon",onClick:s[8]||(s[8]=o=>i.toggleEdit("new"))},s[18]||(s[18]=[e("i",{class:"bi bi-pencil-square"},null,-1)]))])]),e("div",x,[e("div",ee,[d(e("input",{type:i.passwordVisible.confirm?"text":"password",disabled:!i.isEditable.confirm,"onUpdate:modelValue":s[9]||(s[9]=o=>i.password.new.confirm=o),class:"form-control password-input",id:"confirmNewPassword",placeholder:"再次輸入新密碼"},null,8,se),[[g,i.password.new.confirm]]),e("span",{class:"password-toggle",onClick:s[10]||(s[10]=o=>i.togglePassword("confirm"))},[e("i",{class:m(i.passwordVisible.confirm?"bi bi-eye-slash":"bi bi-eye")},null,2)]),e("span",{class:"edit-icon pw-edit-icon",onClick:s[11]||(s[11]=o=>i.toggleEdit("confirm"))},s[19]||(s[19]=[e("i",{class:"bi bi-pencil-square"},null,-1)]))])])])]),e("div",ie,[e("button",{type:"button",class:"btn btn-primary save-button",onClick:s[12]||(s[12]=(...o)=>i.updateUserPassword&&i.updateUserPassword(...o))},s[20]||(s[20]=[e("i",{class:"bi bi-check-circle me-2"},null,-1),t("更新密碼 ")]))])])):v("",!0)])])])]),w(y)]))}}),ne=k(re,[["__scopeId","data-v-e21e358a"]]);export{ne as default};
